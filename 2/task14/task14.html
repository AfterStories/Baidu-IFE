
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>IFE JavaScript Task 01</title>
</head>
<body>
<p>任务描述 <br>
    参考以下示例代码，页面加载后，将提供的空气质量数据数组，按照某种逻辑（比如空气质量大于60）进行过滤筛选，最后将符合条件的数据按照一定的格式要求显示在网页上</p>
<h3>污染城市列表</h3>
<ul id="aqi-list">
    <!--
        <li>第一名：福州（样例），10</li>
          <li>第二名：福州（样例），10</li> -->

</ul>

<script type="text/javascript">

    var aqiData = [
        ["北京", 90],
        ["上海", 50],
        ["福州", 10],
        ["广州", 50],
        ["成都", 90],
        ["西安", 100]
    ];

    (function () {

        /*
         遍历读取aqiData中各个城市的数据
         将空气质量指数大于60的城市显示到aqi-list的列表中
         尝试了几种方法后，参考了其他组对filter方法的使用，故在此加以注解学习。
         */

        /*1.先筛选出符合要求，即指数大于60的数据*/

        var sortaqi = aqiData.filter(function (item) {
            return(item[1]>60);
        });
      /*  Array.filter()方法。在数组中的每个项上运行一个函数，并将函数返回真值的项作为数组返回。简单的说就是用一个条件过滤掉不符合的数组元素，剩下的符合条件的元素组合成新的数组返回到sortaqi这个新数组里。
      * 括号中写的函数就是筛选条件，如本例中要求数组的第二项数据大于60，item() 方法返回位于指定索引位置的节点。*/

        /*2.经过第一步选出符合条件的数据之后，再对它们进行排序*/
        sortaqi.sort(function(a,b){
            return b[1]-a[1];
        })
       /* 这里利用数组的sort方法，即功能为对数组进行排序，默认对非数值按照字母顺序排序，当数组内容为数值时，在sort方法括号内需要写入一个排序条件，即为一个比较函数，这个函数必须要比较两个值，然后返回一个用于说明这两个值的相对顺序的数字。比较函数应该具有两个参数 a 和 b，其返回值如下：
        若 a 小于 b，在排序后的数组中 a 应该出现在 b 之前，则返回一个小于 0 的值。
        若 a 等于 b，则返回 0。
        若 a 大于 b，则返回一个大于 0 的值。

        因此，在sort方法中写入的比较函数即为原数据数组中第二项，两个数据相减，求出相对于0的大小，进而排序。*/

       /*3.获取到显示结果的标签*/
        var showList = document.getElementById("aqi-list");

      /*  4.利用for循环，循环排序后的数组，依次显示。*/
        for(var i = 0;i<sortaqi.length;i++){
           showList.innerHTML+="<li>第"+(1+i)+"名："+sortaqi[i][0]+sortaqi[i][1]+"</li>";
        }
    })();

</script>
</body>
</html>
